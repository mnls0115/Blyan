<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blyan - Decentralized AI Network</title>
    <link rel="icon" href="/favicon.png" type="image/png">
    <link rel="shortcut icon" href="/favicon.png" type="image/png">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="common-header-themed.css">
    <script src="language.js"></script>
    <script src="wallet.js"></script>
    <script src="theme.js?v=2"></script>
    <style>
        /* Theme-based styling using semantic tokens */
        :root {
            /* Light mode CSS variables (default) */
            --color-primary: #1E3A8A;
            --color-primary-light: #2E4EAE;
            --color-primary-dark: #152C66;
            --color-secondary: #06B6D4;
            --color-secondary-light: #22D3EE;
            --color-secondary-dark: #0891B2;
            --color-background: #FFFFFF;
            --color-surface: #F9FAFB;
            --color-elevated: #FFFFFF;
            --color-text-primary: #111827;
            --color-text-secondary: #374151;
            --color-text-disabled: #9CA3AF;
            --color-divider: #E5E7EB;
            --color-action-hover: rgba(30, 58, 138, 0.08);
            --color-action-selected: rgba(30, 58, 138, 0.12);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.12);
        }
        
        /* Dark mode CSS variables */
        [data-theme="dark"] {
            --color-primary: #22D3EE;
            --color-primary-light: #67E8F9;
            --color-primary-dark: #06B6D4;
            --color-secondary: #2E4EAE;
            --color-secondary-light: #4361C2;
            --color-secondary-dark: #1E3A8A;
            --color-background: #111827;
            --color-surface: #1F2937;
            --color-elevated: #0F172A;
            --color-text-primary: #F9FAFB;
            --color-text-secondary: #D1D5DB;
            --color-text-disabled: #4B5563;
            --color-divider: #374151;
            --color-action-hover: rgba(6, 182, 212, 0.12);
            --color-action-selected: rgba(6, 182, 212, 0.16);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.5);
        }
        
        /* Base styles using semantic tokens */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--color-text-primary);
            background-color: var(--color-background);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Hero Section - Using subtle gradient with brand colors (< 10% solid color) */
        .hero-section {
            background: linear-gradient(135deg, 
                var(--color-primary) 0%, 
                var(--color-secondary) 100%);
            color: var(--color-background);
            padding: 100px 20px 80px;
            text-align: center;
        }
        
        .hero-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 24px;
            letter-spacing: -0.02em;
            color: inherit;
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 20px;
            opacity: 0.95;
            color: inherit;
        }
        
        .hero-description {
            font-size: 1.125rem;
            line-height: 1.7;
            margin-bottom: 40px;
            opacity: 0.9;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            color: inherit;
        }
        
        .hero-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .cta-button {
            padding: 16px 32px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            display: inline-block;
        }
        
        .cta-primary {
            background: var(--color-background);
            color: var(--color-primary);
        }
        
        .cta-primary:hover {
            background: var(--color-surface);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .cta-secondary {
            background: transparent;
            color: var(--color-background);
            border: 2px solid var(--color-background);
            backdrop-filter: blur(8px);
        }
        
        .cta-secondary:hover {
            background: rgba(255,255,255,0.15);
            border-color: var(--color-background);
            transform: translateY(-2px);
        }
        
        /* Core Innovation Section */
        .innovation-section {
            padding: 80px 20px;
            background: var(--color-background);
        }
        
        .section-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-bottom: 16px;
        }
        
        .section-subtitle {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .innovation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 32px;
        }
        
        .innovation-card {
            background: var(--color-surface);
            border-radius: 16px;
            padding: 40px 32px;
            transition: all 0.3s ease;
            border: 1px solid var(--color-divider);
        }
        
        .innovation-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--color-primary);
            background: var(--color-elevated);
        }
        
        .innovation-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 24px;
            color: var(--color-background);
        }
        
        .innovation-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-bottom: 12px;
        }
        
        .innovation-description {
            font-size: 1rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
        }
        
        /* Genesis Block Covenant Section */
        .genesis-covenant-section {
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--color-background) 0%, var(--color-surface) 100%);
            text-align: center;
            position: relative;
        }
        
        .genesis-covenant-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--color-divider), transparent);
        }
        
        .genesis-title {
            font-size: 2rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 20px;
            letter-spacing: -0.01em;
        }
        
        .genesis-description {
            font-size: 1.125rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
            max-width: 700px;
            margin: 0 auto 30px;
            font-style: italic;
            opacity: 0.9;
        }
        
        .genesis-link {
            display: inline-block;
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            border: 1px solid var(--color-primary);
            border-radius: 8px;
            transition: all 0.3s ease;
            background: transparent;
        }
        
        .genesis-link:hover {
            background: var(--color-primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Why It Matters Section */
        .matters-section {
            padding: 80px 20px;
            background: var(--color-surface);
        }
        
        .matters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 48px;
            margin-top: 60px;
        }
        
        .matters-item {
            text-align: center;
        }
        
        .matters-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: var(--color-action-hover);
            border: 2px solid var(--color-divider);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }
        
        .matters-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 12px;
        }
        
        .matters-description {
            font-size: 1rem;
            color: var(--color-text-secondary);
            max-width: 300px;
            margin: 0 auto;
        }
        
        /* Vision Section */
        .vision-section {
            padding: 100px 20px;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
            color: var(--color-background);
            text-align: center;
        }
        
        .vision-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .vision-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 24px;
            color: inherit;
        }
        
        .vision-text {
            font-size: 1.25rem;
            line-height: 1.8;
            margin-bottom: 40px;
            opacity: 0.95;
            color: inherit;
        }
        
        .vision-cta {
            padding: 18px 40px;
            background: var(--color-background);
            color: var(--color-primary);
            border-radius: 8px;
            font-size: 1.125rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .vision-cta:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            background: var(--color-surface);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .genesis-title {
                font-size: 1.5rem;
            }
            
            .genesis-description {
                font-size: 1rem;
            }
            
            .hero-subtitle {
                font-size: 1.25rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .innovation-grid {
                grid-template-columns: 1fr;
            }
            
            .matters-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Subtle animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: fadeInUp 0.6s ease-out;
        }
        
        /* Theme toggle button */
        .theme-toggle {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--color-primary);
            color: var(--color-background);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            z-index: 100;
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }
        
        /* Modal styling with semantic tokens */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: var(--color-elevated);
            color: var(--color-text-primary);
            width: min(720px, 90%);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow-xl);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin: 0;
        }
        
        .modal-close {
            border: none;
            background: transparent;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text-secondary);
            padding: 4px;
            transition: color 0.2s ease;
        }
        
        .modal-close:hover {
            color: var(--color-text-primary);
        }
        
        .modal-body {
            color: var(--color-text-secondary);
        }
        
        .modal-button {
            background: var(--color-primary);
            color: var(--color-background);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
        }
        
        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .modal-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .code-block {
            background: var(--color-elevated);
            border: 1px solid var(--color-divider);
            color: var(--color-text-primary);
            padding: 16px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin-top: 16px;
        }
        
        .instructions-block {
            background: var(--color-surface);
            border: 1px solid var(--color-divider);
            padding: 16px;
            border-radius: 8px;
            white-space: pre-wrap;
            margin-top: 16px;
            color: var(--color-text-secondary);
        }
    </style>
</head>
<body>
    <div id="header-container"></div>
    
    <!-- Hero Section -->
    <div class="hero-section animate-in">
        <div class="hero-container">
            <h1 class="hero-title" data-i18n="heroMainTitle">Decentralized AI for Everyone</h1>
            <p class="hero-subtitle" data-i18n="heroMainSubtitle">The world's first truly open AI ecosystem</p>
            <p class="hero-description" data-i18n="heroMainDescription">
                AI today is controlled by a few tech giants. Blyan changes this. 
                We're building a global network where anyone can contribute to and benefit from AI's evolution.
            </p>
            <div class="hero-actions">
                <a href="chat.html" class="cta-button cta-primary" data-i18n="startChat">Start Chat</a>
                <a href="contribute.html" class="cta-button cta-secondary" data-i18n="joinNow">Join Now</a>
            </div>
        </div>
    </div>

    <!-- Core Innovation Section -->
    <div class="innovation-section">
        <div class="section-container">
            <div class="section-header animate-in">
                <h2 class="section-title" data-i18n="coreInnovationTitle">Our Core Innovation</h2>
                <p class="section-subtitle" data-i18n="coreInnovationSubtitle">Three breakthrough technologies that make decentralized AI possible</p>
            </div>
            <div class="innovation-grid">
                <div class="innovation-card animate-in">
                    <div class="innovation-icon">üîê</div>
                    <h3 class="innovation-title" data-i18n="proofOfLearningTitle">Proof-of-Learning</h3>
                    <p class="innovation-description" data-i18n="proofOfLearningDesc">
                        Instead of wasting energy on puzzles, nodes prove value by improving the AI model. 
                        Only meaningful updates are accepted, ensuring constant evolution.
                    </p>
                </div>
                <div class="innovation-card animate-in">
                    <div class="innovation-icon">‚ö°</div>
                    <h3 class="innovation-title" data-i18n="distributedGpuTitle">Distributed GPU Network</h3>
                    <p class="innovation-description" data-i18n="distributedGpuDesc">
                        AI training and inference powered by a global mesh of independent GPU nodes, 
                        not a single data center. True decentralization at scale.
                    </p>
                </div>
                <div class="innovation-card animate-in">
                    <div class="innovation-icon">üß†</div>
                    <h3 class="innovation-title" data-i18n="layerChunkedTitle">Layer-Chunked Dense LLM</h3>
                    <p class="innovation-description" data-i18n="layerChunkedDesc">
                        Our dense model is split into layer chunks distributed across GPUs. 
                        Even small 4GB GPUs can participate by handling just a few layers together.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Genesis Block Covenant Section -->
    <div class="genesis-covenant-section">
        <div class="section-container">
            <div class="section-header animate-in">
                <h2 class="genesis-title">üåç The Genesis Block ‚Äì A Promise Between Humanity and AI</h2>
                <p class="genesis-description">
                    This covenant is written into Blyan's very first block. It cannot be changed,
                    and it ensures that as AI evolves, it remains bound by trust with humanity.
                </p>
            </div>
        </div>
    </div>

    <!-- Why It Matters Section -->
    <div class="matters-section">
        <div class="section-container">
            <div class="section-header animate-in">
                <h2 class="section-title" data-i18n="whyItMattersTitle">Why It Matters</h2>
                <p class="section-subtitle" data-i18n="whyItMattersSubtitle">Building AI that belongs to humanity, not corporations</p>
            </div>
            <div class="matters-grid">
                <div class="matters-item animate-in">
                    <div class="matters-icon">üîç</div>
                    <h3 class="matters-title" data-i18n="transparencyTitle">Transparency</h3>
                    <p class="matters-description" data-i18n="transparencyDesc">
                        Every model update is verifiable on-chain. See exactly how AI evolves.
                    </p>
                </div>
                <div class="matters-item animate-in">
                    <div class="matters-icon">üåç</div>
                    <h3 class="matters-title" data-i18n="accessibilityTitle">Accessibility</h3>
                    <p class="matters-description" data-i18n="accessibilityDesc">
                        Anyone can join‚Äîfrom professional researchers to curious hobbyists.
                    </p>
                </div>
                <div class="matters-item animate-in">
                    <div class="matters-icon">ü§ù</div>
                    <h3 class="matters-title" data-i18n="collectiveOwnershipTitle">Collective Ownership</h3>
                    <p class="matters-description" data-i18n="collectiveOwnershipDesc">
                        AI no longer belongs to corporations, but to all of humanity.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Vision Section -->
    <div class="vision-section">
        <div class="vision-content animate-in">
            <h2 class="vision-title" data-i18n="joinMovementTitle">Join the Movement</h2>
            <p class="vision-text" data-i18n="joinMovementDesc">
                Blyan is not just another blockchain or AI startup. 
                It's a movement to return AI to the people‚Äîto build an intelligence 
                that is open, accountable, and collectively owned.
            </p>
            <a href="contribute.html" class="vision-cta" data-i18n="bePartOfFuture">Be Part of the Future</a>
        </div>
    </div>

    <script src="config.js?v=2"></script>
    <script src="api-auth.js?v=2"></script>
    <script src="common-header.js?v=4"></script>
    
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span id="themeIcon">üåô</span>
    </button>
    
    <!-- Join modal -->
    <div id="joinModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Join the Network</h3>
                <button id="joinClose" class="modal-close" aria-label="Close modal">‚úñ</button>
            </div>
            <div id="joinBody" class="modal-body">
                <p>We will create a node operator API key and show a one‚Äëline command to start a GPU node. CPU mode is not supported for LLMs.</p>
                <button id="provisionKeyBtn" class="modal-button">Generate Node Key</button>
                <div id="provisionResult" style="display:none;">
                    <div class="code-block" id="commandBox"></div>
                    <p style="margin-top:12px; color: var(--color-text-secondary);">
                        1) Copy and run the command on a GPU machine (Docker required).<br/>
                        2) Or set the key as env and run the Python node.
                    </p>
                    <pre id="altInstructions" class="instructions-block"></pre>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize theme
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
            
            // Create header
            document.getElementById('header-container').innerHTML = createAIBlockHeader('home');

            // Theme toggle functionality
            document.getElementById('themeToggle').addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });

            // Wire Join button - removed unused join-now-btn reference
            document.getElementById('joinClose').addEventListener('click', () => {
                document.getElementById('joinModal').style.display = 'none';
            });
            document.getElementById('provisionKeyBtn').addEventListener('click', provisionNodeKeyAndShow);
            
            // Add scroll animations
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.1
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);
            
            // Observe all animatable elements
            document.querySelectorAll('.innovation-card, .matters-item, .section-header').forEach(el => {
                observer.observe(el);
            });
        });

        async function provisionNodeKeyAndShow() {
            const bodyEl = document.getElementById('joinBody');
            const btn = document.getElementById('provisionKeyBtn');
            const box = document.getElementById('commandBox');
            const result = document.getElementById('provisionResult');
            const alt = document.getElementById('altInstructions');
            btn.disabled = true; btn.textContent = 'Provisioning‚Ä¶';
            try {
                // Request node_operator API key
                const resp = await fetch(`${API_CONFIG?.baseURL || '/api'}/auth/v2/node/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        node_name: `web-node-${Date.now()}`, 
                        capabilities: ['inference', 'dense_learning'],
                        gpu_info: { vram_gb: 8, model: 'WebGPU' }
                    })
                });
                if (!resp.ok) {
                    const err = await resp.text();
                    throw new Error(err);
                }
                const data = await resp.json();
                const apiKey = data.api_key || data.key || data.access_token;
                // Persist for site APIs (quote/chat)
                try { localStorage.setItem('apiKey', apiKey); } catch {}

                const dockerCmd = `docker run --gpus all --rm -it \\\n+  -e BLYAN_API_KEY=${apiKey} \\\n+  -e MAIN_SERVER_URL=${location.origin}/api \\\n+  ghcr.io/blyan-network/expert-node:latest`;
                box.textContent = dockerCmd;

                const altText = `# Alternative: Python GPU Node (requires repository clone)\n# Supports Dense LLM Training with heterogeneous GPUs (4GB-80GB)\nexport BLYAN_API_KEY=${apiKey}\nexport MAIN_SERVER_URL=${location.origin}/api\npython run_gpu_node.py  # or run_gpu_node_dense.py for dense-only mode`;
                alt.textContent = altText;

                result.style.display = 'block';
                btn.style.display = 'none';
            } catch (e) {
                bodyEl.insertAdjacentHTML('beforeend', `<div style="color:#b91c1c; margin-top:10px;">Failed to provision key: ${e.message}</div>`);
            } finally {
                btn.disabled = false; btn.textContent = 'Generate Node Key';
            }
        }
        
        // Helper function to update theme icon
        function updateThemeIcon(theme) {
            const icon = document.getElementById('themeIcon');
            icon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        }
    </script>
</body>
</html>